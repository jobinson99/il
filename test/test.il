#1 核心代码手记

表达式要打开 全局和多行，情景敏感 /gm
行内 不加 /m


#2 行内

两边要空格么？

注意单个单词和多个单词的表达式区别。


``` 

加粗
*xxx*         / \*\w+\* /g
              / \*.+\* /g
	      / \*[\s\S]+?\* /g
              / \*(?=\S)([\s\S]*?\S)\* (?!\*)/g
	      emacs版：
斜体
/xxx/         / \/\w+\/ /g
	      / \/(?=\S)([\s\S]*?\S)\/ (?!\/)/g
	      emacs版：
删除线
+xxx+         / \+\w+\+ /g
	      / \+(?=\S)([\s\S]*?\S)\+ (?!\+)/g
	      emacs版：
下划线
_xxx_         / \_\w+\_ /g
	      / \_(?=\S)([\s\S]*?\S)\_ (?!\_)/g
	      emacs版：

上下标
^xxx^         /\^\w+\^/g
~xxx~         /\~\w+\~/g
	      /(?<!\\|\s)\^(\S+?)\^(?<!\\\^)/g     前后不能有空格，且消除了 第一个代号转义问题。中间不能有空格
	      /(?<!\\)\^(\S+?)\^(?<!\\\^)/g    前后可有空格
	      emacs版：
	     
代码
`xxx`         / \`\w+\` /g
	      / \`(?=\S)([\s\S]*?\S)\` (?!\`)/g
	      emacs版：
	     
代码块里，其他选定失效。


自定义行内
{xxx| yyy}      / \{\w+\| (?=\S).*\} /g 
{xxx[ yyy]}
[xxx| yyy|]
[[xxx xxx][yyy xxx]]      / \[\w+\]\[(?=\S).*\]\] /g
	       emacs版：
转义
\              / \\ /g
	       emacs版：
```


#3 测试数据：行内

```


 *xx要选到x* 
 *fsdf f要选到asdf* 
 * fysd不选到f *
 *fs要选到dfa**** 
da*fd不选到sf* 
*fsa*fsd不选到f

 /dfs d要选到f/
/sd不选到fd/

 +ad 要选到s+ 
asdf +sfs要选到df+ fdf
+fsad不选到fsd+ fadsf
 + d不选到fas +
 +sfs要选到df+++++
3 + 5 = 8 4 - 2 = 2

as^f要选到s^dfs
fds\^f不选到sd^a要选到fs^fd
afd^s要选到f\^s要选到d^fsdfsd
^不选到^ afasf
Roll ov^e^r matches or the ex\^p不选到res^sgj要选到gjh^ion f^ ^ ^^or details.Chea^要选到h^t不选到sh^h要选到^ eet, full Ref^er要选到e\^n要选到^ce, results ^wi不选到th^ the Tools below. Replace & List ou^67要选到tp^ut

```

#3 连接

```

[xxx](yyy)      / \[\w+\]\(.+\) /g
[xxx| yyy]      / \[\w+\| .+\]/g
                / \[.+\| .+\]/g     可多个单词描述，加空格
[[http://www.bian.ga][bian.ga]]
[[dir/image.png][imagename]]

[[#anchor][anchorname]]
[[:anchor][anchor content]]

```



#2 区块


```
标题  正则表达式
 #1 #2 #3   /^(#[1-6]{1}\+?\s*) ([^\n]+?)\s*(?:\n$)/gm bug多
          /^#[1-6]{1}\+?\s.+\n$/gm    仍有bug，断行会使其失效
	  /^#[1-6]{1}\+?\s.+\n*$/gm   从此处下面的都消除了断行 失效问题。但若第一行无空格，则连续断行会被选取。
	  /^#[1-6]{1}\+?\s.+\n?$/gm
	  /^#[1-6]{1}\+?\s.+\n*?$/gm
	  /^#[1-6]{1}\+?\s.+(?:\n$)/gm
	  /^(#[1-6]{1}\+?) .+(?:\n|$)/gm 消除了第一行无空格，连续断行会被选取问题。
	  ^(#[1-6]{1}\+?\s+.*[\n\r][^]*?)  这也行
	  
	  emacs版：^\\(\\(#[1-6]\\+?[[:blank:]]+\\).*[\n\r][\\^]*?\\)
	  
捕获 #1 ~#6 #1+~#6+ 且 句末换行。
但不 捕获立刻换行和多个 #若干空格 后直接换行的。

分隔行
 ===     /^(\={3} *)(?:\n+|$)/    或    /^(\={3}\s*)(?:\n+|$)/
         emacs版：^=\\{3\\}[[:blank:]]*\\(?:\n\\|$\\)
捕获 行首 === 且需换行


引用块
 > >> >[ >]     /^([\>]+(\[|\])?)\s+([^\n]+?)\s*(?:\n+|$)/
捕获 行首 且 行末可空格 且 需换行

 >[ >]     /(^\>\[ )(.|\n)*(-\>\])/
          emacs版：\\(\\(^[>]+\\)\\[\\([[:blank:]]+\\)\\(.\\|\n\\)*?\\(\\2\\]\\)\n?\\)\\|\\(^\\(\\([>]+[[:blank:]]+\\).*[\n\r][\\^]*?\\)\\)

列表
 - -- + -[ -]     /^([\-|\+]+(\[|\])?)\s+([^\n]+?)\s*(?:\n+|$)/

 -[ -]     /(^\-\[ )(.|\n)*(-\-\])/
           emacs版：^\\(\\([-+]+[[:blank:]]+\\).*[\n\r][\\^]*?\\)
           \\(^[+-]+\\)\\[\\([[:blank:]]+\\)\\(.\\|\n\\)*?\\(\\1\\]\n?\\)

           \\(\\(^[+-]+\\)\\[\\([[:blank:]]+\\)\\(.\\|\n\\)*?\\(\\2\\]\\)\n?\\)\\|\\(^\\(\\([-+]+[[:blank:]]+\\).*[\n\r][\\^]*?\\)\\)

程序块  \1 表示引用第一个 匹配组 ```
\``` ``` shell   /^(`{3})([\s\S]*?)\n?\s*\1\s*(?:\n+|$)/
                /(^`{3})([\s\S]*?)(.|\n)*\1/ 
                /(^`{3})([\s\S]*?).*\1(?=\s*\n$)/gm   解决最后三个`后面跟空格问题。
		/^(`{3}.*[\n\r][^]*?^`{3})/gm   这也完美
                emacs版：\\(^```\\)\\(\\s \\)\\(.\\|\n\\)*?\\(^```\\)\\n?
注意：所有的选择在程序块里，都应失效。

自定义区块
\``` custom xxx yyy
 内容
\```

换行 空一行
              /^\n+/

```



#2 测试用的样例：区块



#3 测试用的样例：标题



##1+ afdfsfa不可选到


#1+ sfadsf需要选到

##   ffds

## 

#1 
#11 不要选到

#2:: fad不要选到

#22: fasdf不要选到

#1: 22不要选到

# 22 dfasdf不要选到


#22 发生地法不要选到

# 1

## sdfasd不要选到

##3: asfsdf不要选到

# fasdf要选到
### fasdfa不要选到


#+ adsffd不要选到

#2 dfdf要选到

#3: afasdf不要选到

#2 #3 #2

#4 afsdfaf要选到

#111 dasfsdd不要选到 

#2  fasdf asfdf要选到

#2 fasfd要选到 #2

#afsdf不要选到 

###

 #1 3fdaf不要选到

[解决]断行会使其失效
#1 fasf要选到 

·[解决]第一行无空格，连续断行会被选取问题。
#1
fgfhgf不要 选到


#3 测试用的样例：分隔线

 ===

=== 

===   

===   fdsfds需要失效

===

  ===

=====


#3 测试用的样例：引用

> a
>  f
>> ad

>>> fsdf

>[ fadf

>[ d必需对应
必需选到
>] f必需对应

 > dsf不可选到

>sfsdfs不可选到
>[afsdf不可选到

#3 测试用的样例：列表

- fasdf
-- fasd
-+ fasdf 

-[ fdasf必需对应
必需选到
-] fasdfs必需对应，但不选中后面的

--[ fdasf必需对应
必需选到
--] fasdfs必需对应，但不选中后面的

--[ fasdf无法对应
无对应
-+] fsadf s无法对应

+ ewfasdf可选到

++- fasdfa s 
不可选到

--fsdfa不可选到
+fsaddfsa不可选到
 - afsdfa不可选到
 + sdfas不可选到



#3 测试用的样例：程序块

``` shell highlight run

defun test

df *asf* 不可作用

#1 afsdf 不可作用

> afsdf 不可作用
asdfs

- afsd不可作用
+ f不可作用

sf
```

``` shell2 khk jh ghjj
asdf
sdfs
1fdsa
dfasfd要选到
1fdsa
1dfas

```

```
3asfsad要选到
asdfsdf
```

  ```
  ```

```
dsfdfas

```


```` 
fasdf不要选到
 
````

``` shell
asdff要选到
```

``` 
  ``` 不要选到 区段要选到
```


``` shell highlight run init
defun test 要选到
```


```
fasdf
   dsfsdfa
asdfdsf要选到
fsdafs
```






